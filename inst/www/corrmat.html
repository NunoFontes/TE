<!DOCTYPE html>
<head>
 <title>Correlation Matrix</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
    <link href="./dist/css/bootstrap.css" rel="stylesheet">
    <link href="./dist/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="./dist/themes/blue/style.css" rel="stylesheet">
    <link href="./dist/css/my.css" rel="stylesheet"> 
</head>
<body>
<div id="alert"></div>     
<div class="row myselec">
    <div class="col-sm-4">
      <div class="panel">
        <div class="panel-heading">
             <ul id="myTab" class="nav nav-tabs">
             <li class="active" data-num="1">
              <a data-toggle="tab" data-num="1">One Indicator</a></li>
             <li data-num="2"><a data-toggle="tab" data-num="2">One Country</a></li>
             <!--li data-num="3"><a data-toggle="tab" data-num="3">Mix</a></li-->
             </ul> 
        </div>
        <div class="panel-body">       
          <div id="selectionZone2"> 
          </div> <div id="selectionZone1"> 
          </div> 
          <p><button id="submitbutton" type="button" class="btn btn-xs btn-primary myselec">SUBMIT !</button></p>
        </div>
      </div>
    </div>
    <div class="col-sm-4">
      <div id="plotdiv">
      </div>  
      <button id="sharebutton" type="button" class="btn btn-xs btn-default pull-centre" style="visibility:hidden">Share</button>
      <button id="seetable" type="button" class="btn btn-xs btn-default pull-centre" style="visibility:hidden">View Data</button>
      <div id="embbed"></div>
    </div>
    </div>
  <div id="tablediv" class="tablesorter">
</div>
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="opencpu/opencpuTE.js"></script> 
    <script src="./dist/js/bootstrap.min.js"></script>
    <script src="./dist/jquery.tablesorter.js"></script> 
    <script src="./dist/addons/pager/jquery.tablesorter.pager.js"></script>
    <script src="helper.js"></script>
    <script type="text/javascript" src="./dist/js/iframeResizer.contentWindow.min.js"></script>
    <script>
var type = "te.correlation.matrix";
 function go(){
 country = $("#country").val();
 indicator = $("#indicator").val();
 rInteractPlot(type, [userN,passW], country, indicator, "")
 }
$('a[data-num="1"]').on('shown.bs.tab', function (e) {
  $('#loadingDiv').show();
 loadInfo(function(){
  bIndicatorDD("#selectionZone2","indicator",function(){
    bMultipleCountriesDD("#selectionZone1","country",function(){
      go()
      $("#indicator").change(function() {
       if($("#indicator").attr("multiple")=="multiple"){}else{
       rCountryDD($("#indicator").val(),function(){
       bMultipleCountriesDD("#selectionZone1","country",function(){},country)
    })
   }});
        
  $("#country").change(function() {
    if($("#country").attr("multiple")=="multiple"){}else{
    rIndicatorDD($("#country").val(),function(){
      bMultipleIndicatorsDD("#selectionZone2","indicator",function(){},indicator)
    })
   }});
    })
  })
 });
});
$('a[data-num="2"]').on('shown.bs.tab', function (e) {
  $('#loadingDiv').show();
loadInfo(function(){
  bMultipleIndicatorsDD("#selectionZone1","indicator",function(){
    bCountryDD("#selectionZone2","country",function(){
      go()
  
$("#indicator").change(function() {
  if($("#indicator").attr("multiple")=="multiple"){}else{
    rCountryDD($("#indicator").val(),function(){
    bMultipleCountriesDD("#selectionZone2","country",function(){},country)
    })
  }});
        
  $("#country").change(function() {
    if($("#country").attr("multiple")=="multiple"){}else{
    rIndicatorDD($("#country").val(),function(){
    bMultipleIndicatorsDD("#selectionZone1","indicator",function(){},indicator)
    })
  }});
    
   })
  },['Industrial Production','GDP Annual Growth Rate','Inflation Rate','Unemployment Rate','Interest Rate','Retail Sales','Business Confidence'])
 });
});

$('a[data-num="3"]').on('shown.bs.tab', function (e) {
       $("#selectionZone").text('')
       var selec = ""
       $("#selectionZone").append(selec)
});

$(document).ready(function(){
 starts()
 loadInfo(function(){
    bMultipleCountriesDD("#selectionZone1","country",function(){
      bIndicatorDD("#selectionZone2","indicator",function(){
        go()
        
$("#indicator").change(function() {
  if($("#indicator").attr("multiple")=="multiple"){}else{
    rCountryDD($("#indicator").val(),function(){
    bMultipleCountriesDD("#selectionZone1","country",function(){},country)
    })
  }});

/*
$("#country").change(function() {
    if($("#country").attr("multiple")=="multiple"){}else{
    rIndicatorDD($("#country").val(),function(){
    bMultipleIndicatorsDD("#selectionZone1","indicator",function(){},indicator)
    })
  }});
*/       
      })
    })
  })
  
  /*loadCountries("#selectionZone",function(){
  loadIndicators("#selectionZone",buildOneIndicatorAllCountries)
 })*/

  
$("#seetable").on("click", function(){  
 rInteractTable(type, [userN,passW], country, indicator, "")
});
      
$("#submitbutton").on("click", function(){
 submits()
 go()
 });
});
</script>
</body></html>